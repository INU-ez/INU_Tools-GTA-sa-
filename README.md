# INU_Tools (GTA SA)

Аддон для Blender для работы с моделями GTA San Andreas. Предоставляет полный набор инструментов для экспорта, прелайтинга и подготовки 3D моделей для GTA SA.

![Blender](https://img.shields.io/badge/Blender-4.4+-orange?logo=blender)
![License](https://img.shields.io/badge/License-MIT-blue)
![Version](https://img.shields.io/badge/Version-1.4.4-green)

## Возможности

### Инструменты экспорта
- **DFF экспорт** - экспорт моделей в формате GTA SA (v3.6.0.3)
- **COL экспорт** - экспорт коллизий (формат COL3)
- **LOD экспорт** - экспорт моделей низкой детализации
- **TXD экспорт** - экспорт текстурных словарей с DXT сжатием
  - Параллельная обработка (до 8x быстрее)
  - GPU ускорение через NVIDIA Texture Tools (опционально)
  - Автоматическая обработка альфа-канала

### Система Prelight
- **Запекание Vertex Colors** - запекание освещения в вертексные цвета
- **Fill Colors** - покраска полигонов с пипеткой и системой уровней
- **Scatter Light** - рассеивание света с настраиваемыми параметрами
- **Day/Night цвета** - раздельные атрибуты цвета для дня и ночи
- **Анализ цветов** - анализ и предпросмотр вертексных цветов

### Инструменты UV редактора
- **UV Grid Randomizer** - рандомизация позиций UV в ячейках сетки
- **Snap to Grid** - привязка UV островов к ближайшей ячейке сетки
- **9 точек выравнивания** - выбор позиции UV в ячейке (центр, углы, стороны)
- **Связать полигоны** - перемещение полигонов с пересекающимися UV вместе

### Инструменты геометрии
- **Проверка геометрии** - поиск висящих вершин и рёбер
- **Проверка N-gons** - обнаружение полигонов с 5+ вершинами
- **Очистка геометрии** - удаление проблемных элементов

### Инструменты материалов
- **Автозагрузка текстур** - загрузка текстур по именам материалов из указанных папок
- **Очистка материалов** - объединение дубликатов (.001, .002 и т.д.)
- **Проверка материалов** - проверка количества материалов (лимит GTA SA: 50)
- **Drag & Drop** - создание материалов перетаскиванием изображений из File Browser

### Генератор Lightmap
- Генерация и применение лайтмапов к моделям
- Копирование настроек лайтмапа между объектами
- Настройка V-offset для выравнивания текстур

## Требования

- **Blender 4.4+**
- **[DragonFF](https://github.com/Parik27/DragonFF)** аддон (обязателен для DFF/COL экспорта)
- NVIDIA Texture Tools (опционально, для GPU сжатия текстур)

## Установка

1. Скачайте `INU_tools(gta_sa).py`
2. Откройте Blender > Edit > Preferences > Add-ons
3. Нажмите "Install..." и выберите скачанный файл
4. Включите "INU_tools(gta_sa)" в списке аддонов

## Использование

Аддон добавляет панели в:
- **Properties > Scene > INU Tools** - основные инструменты экспорта и текстур
- **View3D > Sidebar (N) > GTA Tools** - инструменты геометрии и прелайта
- **UV Editor > Sidebar (N) > GTA Tools** - инструменты работы с UV

### Быстрый экспорт
1. Назовите объекты с суффиксами: `ИмяМодели_DFF`, `ИмяМодели_LOD`, `ИмяМодели_COL`
2. Выделите все объекты для экспорта
3. Нажмите "Export All" для экспорта DFF, COL, LOD и TXD файлов

## Локализация

Аддон поддерживает русский и английский интерфейсы, автоматически определяя язык Blender.

## История изменений

Смотрите changelog в исходном файле аддона.

## Авторы

- **Идейный автор**: INU
- **Реализация кода**: AI
- **Зависимости**: [DragonFF](https://github.com/Parik27/DragonFF) от Parik27

## Лицензия

Проект предоставляется как есть для сообщества моддеров GTA.
